

る100台のクライアントがダウンロード要求する場合に対して、WSUSサーバを拠点Ａに設置しておけば、WANのトラフィックは単純計算で1/100になる。

[WSUS推奨スペック](https://technet.microsoft.com/ja-jp/library/cc708483(v=ws.10).aspx)


# Windows Server Update Service

# WSUS

## 所有目的
Microsoft製品の最新更新プログラムを展した場合、
当然スローダウン、ダウンロード待ちが発生する。

それを避けるためには各拠点（グループ）ごとに開するためのサーバ。
Microsoft Updateを経由してリリースされた更新プログラムを社内ネットワーク上に存在しているコンピュータに配布する作業を完全に管理できる。


# プッシュ型かプル型か？


# 運用
クライアントが同時にアップデート要求をWSUSサーバを設置し、
その拠点のWSUSサーバからプログラムをダウンロードするようにトラフィックを減らすように設計を行わなければいけない。

例えば、WAN上にWSUSサーバ一台があり、拠点Ａにあ


ネットワーク帯域制御　デザインパターン

パターン１
WSUS
クライアントをグループ化し、インストール承認のタイミングを分散する。
部署Ａは今週　部署Ｂは来週
一度にダウンロード要求を送信するWSUSクライアント
http(https)プロトコルを使用？？

Microsoft製品の最新更新プログラムを展開するためのサーバ。
Microsoft Updateを経由してリリースされた更新プログラムを社内ネットワーク上に存在しているコンピュータに配布する作業を完全に管理できる。


ネットワーク帯域制御について

インストール承認のタイミングでネットワークが圧迫されることがある。
取り急ぎ更新プログラムの配布を緊急停止するのであれば、
WSUS上のIISを停止させるとダウンロードが止まります。

しかし、これは一時的な対応のため、根本的な問題を解決するためにネットワークの帯域制御の計画が必要である。の台数を減らし、
ネットワーク圧迫のピークを分散させます。

パターン２
高速インストールファイルをダウンロードする。

[参考](https://technet.microsoft.com/en-us/library/dd939812(v=ws.10).aspx)

WSUS管理コンソールよりオプション「高速インストールファイルをダウンロードする」を有効

本オプションを有効にすると、Microsoft UpdateからWSUSサーバへダウンロードされるファイルの容量が増えます。
更新プログラムにもよるのでおおよそですが４倍程度のイメージになります。

これにより、クライアントはファイル状況に応じてインストーラ全体でなく、
必要な差分のみをダウンロードする形に動作が変わります。

※親子構成のWSUSサーバ環境で、子側で高速インストールファイルをダウンロードするを有効にすると、親側のコンテンツ容量も肥大化します。


WSUSクライアントがWSUSサーバからインストーラをダウンロードする際には、
Background Intelligent Transfer Service(BITS)
[参考](https://ja.wikipedia.org/wiki/Background_Intelligent_Transfer_Service)
が動作します。

ローカルポリシーやグループポリシーで設定を行うことができます。
BITSバックグラウンド転送の最大ネットワーク帯域幅を制限するを適切に構成することで、WSUSクライアントがダウンロードする際の帯域を制御します。
BITSが仕様する帯域の上限値（kbps）を指定することができます。

WSUS上のIIS設定を変更することで、ダウンロード応答側（サーバ）での制御も可能




# BITS
- 未使用の帯域を利用してファイル転送を行う仕組み
- 他のアプリケーションが80%りようしている場合、20%の帯域を利用する。
- リジューム機能（不意な転送中断でも、再開が可能）
- http(s)上のデータ転送をサポート
- ネットワーク帯域の消費が増えると、転送率を低下させるなど最適化を行う。








//ネットワーク負荷分散のためのＷＳＵＳを構成します。
//データベース　インスタンスごとにフロントエンドＷＳＵＳサーバの最大数は４です。



 # bandwidth(帯域) management


Windows PreInstall Envirnoment(Windows PE)
Windowsをインストールするための環境。
ライブＣＤ環境

よく耳にするプレインストール状態とは異なる。


